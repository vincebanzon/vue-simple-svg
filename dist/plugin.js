"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var CSSOM=require("cssom"),myClassName="span-svg",SpanSVG={render:function(e){return e("span",{class:["span-svg-wrapper"]})},name:"span-svg",props:{filepath:String,fill:String,stroke:String,width:String,height:String,id:{type:String,defualt:""},preserveColor:{type:[Boolean,String],default:!1}},data:function(){return{isSVGReady:!1}},mounted:function(){this.generateInlineSVG()},watch:{filepath:function(e){this.generateInlineSVG()},fill:function(e){this.updateSVGStyle("fill",e)},stroke:function(e){this.updateSVGStyle("stroke",e)},width:function(e){this.updateSVGStyle("width",e)},height:function(e){this.updateSVGStyle("height",e)}},methods:{isClassSelector:function(e){return!!new RegExp("/^./","i").test(e)},removeStyleTag:function(e){for(var t=e.getElementsByTagName("style")[0],r=CSSOM.parse(t.textContent).cssRules,s=e.getElementsByTagName("*"),n=0;n<s.length;n++)for(var i=0;i<r.length;i++){var l=r[i].selectorText;if(this.isClassSelector(l)){var o=l.substring(1);if(s[n].classList.contains(o)){s[n].classList.remove(o);for(var a=r[i].style,g=0;g<a.length;g++){var u=a[g],v=a[u];s[n].style[u]=v}}}}return t.parentNode.removeChild(t),e},removeFillStrokeStyles:function(e){for(var t=e.getElementsByTagName("*"),r=0;r<t.length;r++)if(void 0!==t[r].style){var s=t[r].style.fill;s&&"none"!==s&&(t[r].style.fill="");var n=t[r].style.stroke;n&&"none"!==n&&(t[r].style.stroke="")}},generateInlineSVG:function(){var e=this;this.isSVGReady=!1;var t=this.$el.getElementsByTagName("svg")[0];t&&this.$el.removeChild(t);var r=new XMLHttpRequest;r.open("GET",this.filepath,!0),r.onload=function(){if(r.status>=200&&r.status<400){var t=(new DOMParser).parseFromString(r.responseText,"text/xml").getElementsByTagName("svg")[0];if(!t)return void console.error("No svg element found. Did you pass a valid .svg file?");var s=t.getElementsByTagName("style")[0];e.preserveColor||(s&&(t=e.removeStyleTag(t)),e.removeFillStrokeStyles(t)),t.removeAttribute("xmlns:a"),t.removeAttribute("width"),t.removeAttribute("height"),t.removeAttribute("x"),t.removeAttribute("y"),t.removeAttribute("enable-background"),t.removeAttribute("xmlns:xlink"),t.removeAttribute("xml:space"),t.removeAttribute("version"),e.id&&(t.id=e.id),t.style.width=e.width,t.style.height=e.height,e.preserveColor||(t.style.fill=e.fill,t.style.stroke=e.stroke),t.classList.add(myClassName),e.$el.appendChild(t),this.isSVGReady=!0,e.$emit("ready")}else console.error("There was an error retrieving the source of the SVG.")},r.onerror=function(){console.error("There was an error connecting to the origin server.")},r.send()},updateSVGStyle:function(e,t){var r=this.$el.getElementsByTagName("svg")[0];r?r.style[e]=t:console.error("No svg element found. Did you pass a valid .svg file?")}}},plugin={install:function(e,t){e.component("span-svg",SpanSVG)}};exports.default=plugin,exports.SpanSVG=SpanSVG;
